{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold"><i class="fas fa-briefcase me-2"></i> Freelancing Services</h1>
        <p class="lead">
           I’m a freelance developer and designer specializing in AI Agent Development, Website Design, and Creative Branding. I help businesses and creators build smart digital solutions — from intelligent automation to eye-catching visuals that stand out.
        </p>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="alert alert-info d-flex align-items-center" role="alert">
                    <i class="fas fa-lightbulb me-2 fa-lg"></i>
                    <div>
                        <strong>Expert Freelancer:</strong> With 5+ years of experience, I deliver high-quality work with clear communication and timely delivery.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        {% for service in services %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm hover-lift">
                <div class="card-body">
                    <div class="text-center mb-4">
                        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mx-auto" style="width: 70px; height: 70px;">
                            <i class="{{ service.icon_class|default:'fas fa-briefcase' }} fa-lg"></i>
                        </div>
                    </div>
                    <h5 class="card-title text-center mb-3">{{ service.name }}</h5>
                    <p class="card-text text-center">{{ service.description }}</p>
                    <div class="d-grid mt-3">
                        <a href="{% url 'service_detail' service.id %}" class="btn btn-outline-primary mb-2">
                            <i class="fas fa-eye me-2"></i> View Details
                        </a>
                        {% if service.price %}
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#bookingModal" data-service="{{ service.name }}">
                            <i class="fas fa-shopping-cart me-2"></i> Book for ${{ service.price }}
                        </button>
                        {% else %}
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#bookingModal" data-service="{{ service.name }}">
                            <i class="fas fa-calendar-check me-2"></i> Get Quote
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <!-- How It Works Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-5">
                    <h2 class="text-center mb-5"><i class="fas fa-list-ol me-2"></i> How It Works</h2>
                    <div class="row text-center">
                        <div class="col-md-3 mb-4">
                            <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 60px; height: 60px;">
                                <span class="h4 mb-0">1</span>
                            </div>
                            <h5 class="mb-2">Discovery</h5>
                            <p class="mb-0">We discuss your requirements and goals to understand your needs</p>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 60px; height: 60px;">
                                <span class="h4 mb-0">2</span>
                            </div>
                            <h5 class="mb-2">Proposal</h5>
                            <p class="mb-0">I provide a detailed proposal with timeline and pricing</p>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="rounded-circle bg-info text-white d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 60px; height: 60px;">
                                <span class="h4 mb-0">3</span>
                            </div>
                            <h5 class="mb-2">Execution</h5>
                            <p class="mb-0">I work on your project with regular updates and communication</p>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="rounded-circle bg-warning text-white d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 60px; height: 60px;">
                                <span class="h4 mb-0">4</span>
                            </div>
                            <h5 class="mb-2">Delivery</h5>
                            <p class="mb-0">Receive your completed project and ongoing support</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Payment Options -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h3 class="text-center mb-4"><i class="fas fa-file-invoice-dollar me-2"></i> Payment Options</h3>
                    <p class="text-center mb-4">
                        I offer flexible payment options to accommodate your needs. Secure payments are processed through trusted payment gateways.
                    </p>
                    <div class="d-flex flex-wrap justify-content-center gap-4">
                        <div class="text-center">
                            <div class="rounded-circle bg-light text-dark d-flex align-items-center justify-content-center mx-auto mb-2" style="width: 50px; height: 50px;">
                                <i class="fab fa-cc-visa fa-lg text-primary"></i>
                            </div>
                            <small>Credit Card</small>
                        </div>
                        <div class="text-center">
                            <div class="rounded-circle bg-light text-dark d-flex align-items-center justify-content-center mx-auto mb-2" style="width: 50px; height: 50px;">
                                <i class="fab fa-cc-mastercard fa-lg text-warning"></i>
                            </div>
                            <small>Mastercard</small>
                        </div>
                        <div class="text-center">
                            <div class="rounded-circle bg-light text-dark d-flex align-items-center justify-content-center mx-auto mb-2" style="width: 50px; height: 50px;">
                                <i class="fab fa-paypal fa-lg text-info"></i>
                            </div>
                            <small>PayPal</small>
                        </div>
                        <div class="text-center">
                            <div class="rounded-circle bg-light text-dark d-flex align-items-center justify-content-center mx-auto mb-2" style="width: 50px; height: 50px;">
                                <i class="fas fa-university fa-lg text-success"></i>
                            </div>
                            <small>Bank Transfer</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Call to Action -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm bg-gradient-primary text-white">
                <div class="card-body p-5 text-center">
                    <h3 class="mb-3">Ready to Start Your Project?</h3>
                    <p class="mb-4 lead">
                        Let's discuss your requirements and create something amazing together.
                    </p>
                    <div class="d-flex flex-wrap justify-content-center gap-3">
                        <button class="btn btn-light btn-lg px-4 py-3" data-bs-toggle="modal" data-bs-target="#bookingModal">
                            <i class="fas fa-calendar-check me-2"></i> Book a Consultation
                        </button>
                        <a href="{% url 'contact' %}" class="btn btn-outline-light btn-lg px-4 py-3">
                            <i class="fas fa-envelope me-2"></i> Send a Message
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Booking Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bookingModalLabel"><i class="fas fa-calendar-check me-2"></i> Book an Appointment</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="bookingForm" novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="bookingName" class="form-label">Full Name *</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                                <input type="text" class="form-control" id="bookingName" required>
                                <div class="invalid-feedback">Please enter your name.</div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="bookingEmail" class="form-label">Email Address *</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-at"></i></span>
                                <input type="email" class="form-control" id="bookingEmail" required>
                                <div class="invalid-feedback">Please enter a valid email address.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="bookingPhone" class="form-label">Phone Number</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                <input type="tel" class="form-control" id="bookingPhone">
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="bookingService" class="form-label">Service *</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-briefcase"></i></span>
                                <select class="form-select" id="bookingService" required>
                                    <option value="">Select a service</option>
                                    {% for s in services %}
                                    <option value="{{ s.name }}">{{ s.name }}</option>
                                    {% endfor %}
                                </select>
                                <div class="invalid-feedback">Please select a service.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="bookingDate" class="form-label">Preferred Date *</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-calendar"></i></span>
                                <input type="date" class="form-control" id="bookingDate" required>
                                <div class="invalid-feedback">Please select a date.</div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="bookingTime" class="form-label">Preferred Time *</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-clock"></i></span>
                                <select class="form-select" id="bookingTime" required>
                                    <option value="">Select a time</option>
                                    <option value="09:00">09:00 AM</option>
                                    <option value="10:00">10:00 AM</option>
                                    <option value="11:00">11:00 AM</option>
                                    <option value="12:00">12:00 PM</option>
                                    <option value="13:00">01:00 PM</option>
                                    <option value="14:00">02:00 PM</option>
                                    <option value="15:00">03:00 PM</option>
                                    <option value="16:00">04:00 PM</option>
                                    <option value="17:00">05:00 PM</option>
                                </select>
                                <div class="invalid-feedback">Please select a time.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="bookingMessage" class="form-label">Additional Information</label>
                        <textarea class="form-control" id="bookingMessage" rows="3" placeholder="Tell me more about your project requirements..."></textarea>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-calendar-check me-2"></i> Schedule Appointment
                        </button>
                    </div>
                </form>
                
                <div id="bookingSuccess" class="alert alert-success mt-3 d-none" role="alert">
                    <i class="fas fa-check-circle me-2"></i> Your appointment has been scheduled successfully! I'll contact you soon to confirm.
                </div>
                
                <div id="bookingError" class="alert alert-danger mt-3 d-none" role="alert">
                    <i class="fas fa-exclamation-circle me-2"></i> There was an error scheduling your appointment. Please try again.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set min date for booking form
        const today = new Date();
        const minDate = new Date(today);
        minDate.setDate(today.getDate() + 1);
        document.getElementById('bookingDate').min = minDate.toISOString().split('T')[0];
        
        // Handle service selection from cards
        const bookButtons = document.querySelectorAll('[data-bs-toggle="modal"][data-service]');
        bookButtons.forEach(button => {
            button.addEventListener('click', function() {
                const serviceName = this.getAttribute('data-service');
                if (serviceName) {
                    document.getElementById('bookingService').value = serviceName;
                }
            });
        });
        
        // Handle booking form submission
        const bookingForm = document.getElementById('bookingForm');
        const bookingSuccess = document.getElementById('bookingSuccess');
        const bookingError = document.getElementById('bookingError');
        
        bookingForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check form validity
            if (!bookingForm.checkValidity()) {
                e.stopPropagation();
                bookingForm.classList.add('was-validated');
                return;
            }
            
            // Get form data
            const formData = {
                name: document.getElementById('bookingName').value,
                email: document.getElementById('bookingEmail').value,
                phone: document.getElementById('bookingPhone').value,
                service: document.getElementById('bookingService').value,
                date: document.getElementById('bookingDate').value,
                time: document.getElementById('bookingTime').value,
                message: document.getElementById('bookingMessage').value
            };
            
            // Show success message (in a real implementation, this would be an AJAX call)
            bookingSuccess.classList.remove('d-none');
            bookingError.classList.add('d-none');
            bookingForm.reset();
            bookingForm.classList.remove('was-validated');
            
            // Hide success message after 5 seconds
            setTimeout(() => {
                bookingSuccess.classList.add('d-none');
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('bookingModal'));
                modal.hide();
            }, 3000);
        });
    });
</script>
{% endblock %}